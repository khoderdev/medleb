import{u as y,r,R as d,g as i,j as a,L as v,h as w,i as k,l as C,A as D}from"./index-huJj_8wr.js";const L=()=>{const{guid:o}=y(),[c,l]=r.useState([]),[T,x]=r.useState([]),[s,p]=r.useState(""),[g,n]=r.useState(!0);r.useEffect(()=>{(async()=>{try{n(!0);const e=await D.get(o?`/api/atc/v1.0?guid=${o}`:"/api/atc/v1.0");l(Array.isArray(e.data)?e.data:[]),localStorage.setItem("data",JSON.stringify(e.data))}catch(e){console.error("Error fetching data:",e)}finally{n(!1)}})()},[o]),r.useEffect(()=>{const t=localStorage.getItem("data"),e=localStorage.getItem("atcCodeData");t&&l(JSON.parse(t)),e&&x(JSON.parse(e))},[]);const u=d.useMemo(()=>[{Header:"Code",accessor:"code"},{Header:"Level Name",accessor:"levelName"},{Header:"Level Name (Arabic)",accessor:"levelNameAr"}],[]),m=d.useMemo(()=>{const t=s?s.toLowerCase().trim():"";return c.filter(e=>Object.values(e).some(N=>String(N).toLowerCase().includes(t)))},[c,s]),{getTableProps:h,getTableBodyProps:b,headerGroups:f,rows:j,prepareRow:S}=i.useTable({columns:u,data:m},i.useSortBy);return a.jsx("div",{className:"container mx-auto pt-6 md:px-10 text-black-text dark:text-white-text",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl text-center font-bold mb-4",children:"ATCs Table"}),a.jsxs("div",{className:"flex justify-between items-center pb-4 py-6",children:[a.jsx("input",{type:"text",placeholder:"Search by code",value:s,onChange:t=>p(t.target.value),className:"rounded-md dark:border-white-text text-black-text dark:text-white-text mb-4 bg-white-bg dark:bg-black-bg dark:focus:border-transparent outline-none focus:border-green-pri focus:outline-none focus:ring-2 focus:ring-green-pri dark:focus:ring-2 dark:focus:ring-green-pri"}),a.jsx(v,{to:"/atc/new",className:"med-btn-pri",children:"New"})]}),g?a.jsx("p",{children:"Loading..."}):a.jsx("div",{className:"overflow-x-auto ",children:a.jsxs("table",{...h(),className:"w-full table-auto",children:[a.jsx("thead",{children:f.map(t=>a.jsx("tr",{...t.getHeaderGroupProps(),children:t.headers.map(e=>a.jsxs("th",{...e.getHeaderProps(e.getSortByToggleProps()),className:"px-4 py-2 border font-normal w-20",children:[e.render("Header"),a.jsx("span",{children:e.isSorted?e.isSortedDesc?a.jsx(w,{}):a.jsx(k,{}):a.jsx(C,{})})]}))}))}),a.jsx("tbody",{...b(),children:j.map(t=>(S(t),a.jsx("tr",{...t.getRowProps(),className:"hover:bg-gray-100 dark:hover:bg-black-contents",children:t.cells.map(e=>a.jsx("td",{...e.getCellProps(),className:"border-b px-4 py-2",children:e.render("Cell")}))})))})]})})]})})};export{L as default};
